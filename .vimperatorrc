" vim:set ft=vim:

set defsearch = g
set toolbars = none,tabs

mapclear
autocmd!

let mapleader = ','

:js << EOF
	// Enter passthrough mode automatically in Gmail, Reader, and GrooveShark
	sites_re = [
		'(mail|groups)\\.google\\.com',
		'www\\.google\\.com\\/reader\\/',
		'code\\.google\\.com\\/p\\/[a-z0-9-]+\\/issues\\/',
		'github\\.com\\/[a-zA-Z]+\\/[a-zA-Z0-9-]+\\/(issues|network)',
		'grooveshark\\.com'
	]
	liberator.execute('autocmd LocationChange .* js modes.passAllKeys = /(' + sites_re.join('|') + ')/.test(buffer.URL)');
EOF

noremap <C-j> <S-Esc>

" Disable accesskey
" set! ui.key.generalAccessKey=0

" Hide close button
set! browser.tabs.closeButtons=2

" Use mousewheel acceleration
set! mousewheel.acceleration.factor=5
set! mousewheel.acceleration.start=3

" Increase scroll jump
nnoremap j 5j
nnoremap k 5k
nnoremap h 3h
nnoremap l 3l

" Tab order rearragement
map <silent> <C-S-n> :tabm +1<CR>
map <silent> <C-S-p> :tabm -1<CR>

" Switch to alternate tab
nnoremap <Leader><Leader> <C-^>

" Change d to x (similar to Vimium)
nnoremap d <Nop>
nnoremap x :tabclose<CR>

" Bind up and down on command line
cnoremap <C-p> <Up>
cnoremap <C-n> <Down>

noremap <C-b> :buffer<Space>
noremap <C-h> :history<Space>

" Toggle app tab
map <Leader>a :set apptab!<CR>

" Open LastPass
noremap <Leader>l :tab extoptions LastPass<CR>

noremap <Leader>vv :source ~/.vimperatorrc<CR>
echo "~/.vimperattorrc sourced"
normal <Esc>
